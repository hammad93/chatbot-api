{"changed":false,"filter":false,"title":"get.py","tooltip":"/mongodb/get.py","value":"from pymongo import MongoClient\nfrom bson import ObjectId\nimport gridfs\n'''\ncommands to upload and download the file -\n#connection string\nconnect = \"mongodb://hammadus:7Bnf3_#99@brains-shard-00-00-yjbyo.mongodb.net:27017,brains-shard-00-01-yjbyo.mongodb.net:27017,brains-shard-00-02-yjbyo.mongodb.net:27017/brains?ssl=true&replicaSet=brains-shard-0&authSource=admin\"\n\n#Use connection string to connect to MongoDB atlas\ndb = MongoClient(connect).brains\n#Use GridFS to store the brain file\nfs = gridfs.GridFS(db)\n\n#this downloads a ariana grande bot or you can find another one with a uuid\nfile = fs.fine_one({'_uuid' : '5ef04c3c9a3b4a2c8b31745bd09091ed'})\n\n#create our output file\nfp = open('cobe.brain', 'w')\n\n#write it output\nfp.write(file.read())\n'''\ndef cache(uuid) :\n    print 'getting from cache'\n    #connection string\n    connect = \"mongodb://hammadus:7Bnf3_#99@brains-shard-00-00-yjbyo.mongodb.net:27017,brains-shard-00-01-yjbyo.mongodb.net:27017,brains-shard-00-02-yjbyo.mongodb.net:27017/brains?ssl=true&replicaSet=brains-shard-0&authSource=admin\"\n    \n    #Use connection string to connect to MongoDB atlas\n    db = MongoClient(connect).brains\n    #Use GridFS to store the brain file\n    fs = gridfs.GridFS(db)\n    \n    #this downloads the brain associated with the uuid\n    file = fs.find_one({'_uuid' : uuid})\n    \n    #create our output file\n    fp = open('cache/' + uuid + '.brain', 'w')\n    \n    #write it output\n    fp.write(file.read())\n    \n    #close out and return uuid\n    fp.close()\n    \n    return uuid","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":44,"column":4},"end":{"row":44,"column":4},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1494991804821}